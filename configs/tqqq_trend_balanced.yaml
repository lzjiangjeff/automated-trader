# TQQQ Trend Balanced Configuration
# Research Only / Not Financial Advice

symbol:
  primary: TQQQ
  context:
    - QQQ
    - VIX

data:
  start_date: "2012-01-01"
  end_date: null
  interval: "1d"
  cache_dir: "data/"

strategies:
  trend_ema:
    enabled: true
    ema_fast: 10
    ema_medium: 21
    ema_slow: 50
    rsi_period: 14
    rsi_long_threshold: 52
    rsi_short_threshold: 48
    long_only: true
    regime_filter_enabled: true
    regime_sma_period: 150
    dual_timeframe_enabled: false
    pullback_tolerance: 0.025
    continuation_tolerance: 0.02
    min_trend_strength: 0.001
    max_volatility: 0.3
    min_bars_between_signals: 1
  
  breakout_momentum:
    enabled: true
    lookback: 25
    rvol_threshold: 1.1
    adx_threshold: 15
    atr_buffer_mult: 0.25
  
  mean_reversion:
    enabled: false
  
  volatility_overlay:
    enabled: true
    atr_period: 14
    vol_target_annual: 0.25
    min_size_mult: 0.5
    max_size_mult: 1.3
  
  regime_filter:
    enabled: true
    qqq_sma_period: 150
    vix_threshold: 30
    risk_off_exposure: 0.3
  
  ensemble:
    enabled: false

risk:
  initial_capital: 100000
  per_trade_risk_pct: 2.0
  max_net_exposure: 2.0
  min_net_exposure: -1.0
  max_gross_exposure: 3.0
  stop_atr_mult: 2.0
  trailing_stop_atr_mult: 1.2
  trailing_start_r: 1.2
  trailing_mid_r: 2.5
  trailing_end_r: 5.0
  trailing_start_mult: 1.2
  trailing_mid_mult: 0.9
  trailing_end_mult: 0.7
  time_stop_bars: 80
  daily_loss_limit_pct: 2.5
  max_drawdown_pct: 24.0
  drawdown_recovery_exposure: 0.4
  pyramid_enabled: true
  pyramid_max_adds: 1
  pyramid_add_thresholds: [2.0]
  pyramid_add_scale: 0.5

costs:
  commission_per_share: 0.005
  slippage_bps: 5
  market_impact_bps: 3

backtesting:
  walk_forward:
    train_years: 3
    test_years: 1
    min_train_years: 2
  benchmark_symbols:
    - TQQQ
    - QQQ

reporting:
  output_dir: "out/"
  generate_charts: true
  generate_html: true
  chart_format: "png"
  save_trade_log: true
  save_metrics_json: true

execution:
  mode: "paper"
  ibkr:
    host: "127.0.0.1"
    port: 7497
    client_id: 2
    timeout: 30
  risk_guard: true
  kill_switch_enabled: true
